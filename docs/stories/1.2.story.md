# Epic 1: MVP - Análise e Preenchimento Automatizado de Formulário

## Estória 1.2: Implementar a Lógica de Análise com a API do Gemini

- **Status:** Ready for Review

**Como um** usuário,
**Eu quero** clicar no botão "Analisar" e receber uma análise do formulário gerada pela IA,
**Para que** eu possa validar a resposta do pedido de informação de forma automatizada.

### Critérios de Aceitação (AC):
1.  Quando o usuário clicar no botão "Analisar", o frontend deve enviar o conteúdo das duas áreas de texto para um novo endpoint no backend.
2.  O backend deve ter um endpoint `/api/analyze` que aceita uma requisição POST com os textos do "pedido" e da "resposta".
3.  O endpoint `/api/analyze` deve usar a `GOOGLE_API_KEY` (disponível como variável de ambiente) para enviar um prompt para a API do Gemini 1.5 Flash.
4.  O prompt enviado para a IA deve instruí-la a preencher o formulário `docs/formulario_base.txt` com base nos textos fornecidos.
5.  O backend deve retornar a resposta da IA (o formulário preenchido) como uma string de texto no corpo da resposta da API.
6.  O frontend deve exibir a resposta recebida da API em uma nova área de texto ou em um componente de visualização de texto não-editável.
7.  Enquanto a análise estiver em andamento, o botão "Analisar" deve ser desabilitado e um indicador de carregamento (loading) deve ser exibido.

### Notas para o Desenvolvedor (Dev Notes):

- **Backend:** Crie um novo arquivo de rota em `apps/api` para o endpoint `/api/analyze`. Use Express.js.
- **API Client:** Para interagir com a API do Google, use o pacote `@google/generative-ai`. Adicione-o como uma dependência no `package.json` da `api`.
- **Gerenciamento de API Key:** Carregue a `GOOGLE_API_KEY` a partir das variáveis de ambiente no backend. **NUNCA** a exponha no código do frontend. Use um pacote como `dotenv` para facilitar o desenvolvimento local.
- **Frontend State Management:** Use o estado do React (`useState`) para gerenciar os textos, o estado de carregamento (loading) e o resultado da análise.
- **Comunicação Frontend-Backend:** Use a função `fetch` ou uma biblioteca como `axios` para fazer a requisição POST do frontend para o backend.

### Tarefas / Subtarefas:

- [x] **Backend - Tarefa 1:** Adicionar as dependências `@google/generative-ai` e `express` ao `package.json` do `apps/api`.
- [x] **Backend - Tarefa 2:** Criar um servidor Express básico em `apps/api` que escute em uma porta (ex: 3001).
- [x] **Backend - Tarefa 3:** Implementar o endpoint POST `/api/analyze`.
- [x] **Backend - Tarefa 4:** No endpoint, ler os textos do corpo da requisição.
- [x] **Backend - Tarefa 5:** Ler o conteúdo do arquivo `docs/formulario_base.txt` para montar o prompt.
- [x] **Backend - Tarefa 6:** Inicializar o cliente da API do Gemini e enviar o prompt com os textos e o formulário.
- [x] **Backend - Tarefa 7:** Retornar a resposta da IA como resultado do endpoint.
- [x] **Frontend - Tarefa 8:** Instalar `axios` (ou usar `fetch`) no `apps/web`.
- [x] **Frontend - Tarefa 9:** Criar estados (`useState`) para armazenar o resultado da análise e o estado de carregamento.
- [x] **Frontend - Tarefa 10:** Implementar a função que é chamada no `onClick` do botão "Analisar".
- [x] **Frontend - Tarefa 11:** Na função de clique, fazer a chamada POST para `http://localhost:3001/api/analyze` com os textos.
- [x] **Frontend - Tarefa 12:** Exibir um indicador de carregamento enquanto a requisição estiver pendente.
- [x] **Frontend - Tarefa 13:** Renderizar o resultado da análise na tela quando a requisição for concluída.
